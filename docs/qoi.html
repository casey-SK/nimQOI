<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>qoi</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">qoi</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="theindex.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Channels"
    title="Channels = enum
  RGB = 3, RGBA = 4">Channels</a></li>
  <li><a class="reference" href="#Colorspace"
    title="Colorspace = enum
  sRGB = 0, linear = 1">Colorspace</a></li>
  <li><a class="reference" href="#Header"
    title="Header = object
  width*: uint32
  height*: uint32
  channels*: Channels
  colorspace*: Colorspace">Header</a></li>
  <li><a class="reference" href="#QOIF"
    title="QOIF = object
  header*: Header
  data*: seq[byte]">QOIF</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">decodeQOI
      <li><a class="reference" href="#decodeQOI%2CMemStream"
    title="decodeQOI(stream: MemStream): QOIF">decodeQOI(stream: MemStream): QOIF</a></li>

  </ul>
  <ul class="simple nested-toc-section">encodeQOI
      <li><a class="reference" href="#encodeQOI%2CHeader%2CMemStream"
    title="encodeQOI(header: Header; stream: MemStream): MemStream">encodeQOI(header: Header; stream: MemStream): MemStream</a></li>

  </ul>
  <ul class="simple nested-toc-section">readQOI
      <li><a class="reference" href="#readQOI%2Cstring"
    title="readQOI(file: string): QOIF">readQOI(file: string): QOIF</a></li>

  </ul>
  <ul class="simple nested-toc-section">writeQOI
      <li><a class="reference" href="#writeQOI%2Cstring%2CHeader%2CMemStream"
    title="writeQOI(file: string; header: Header; stream: MemStream)">writeQOI(file: string; header: Header; stream: MemStream)</a></li>

  </ul>

  </ul>
</li>

</ul>

  </div>
  
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"><img src="qoi_logo.png"/><h1 id="the-quite-ok-image-format-for-fast-lossless-compression"><center><strong>The Quite OK Image Format for Fast, Lossless Compression</strong></center></h1><p><strong>About</strong></p>
<p>QOI encodes and decodes images in a lossless format. Compared to stb_image and stb_image_write QOI offers 20x-50x faster encoding, 3x-4x faster decoding and 20% better compression. The <a class="reference external" href="https://qoiformat.org/qoi-specification.pdf">QOI specification document</a> outlines the data format.</p>
<dl class="docutils"><dt><strong>Available Functions</strong></dt>
<dd><ul class="simple"><li>readQOI    -- read and decode a QOI file</li>
<li>decodeQOI  -- decode the raw bytes of a QOI image from memory</li>
<li>writeQOI   -- encode and write a QOI file</li>
<li>encodeQOI  -- encode an rgba buffer into a QOI image in memory</li>
</ul>
</dd>
</dl>
<p><strong>QOI Format Specification</strong></p>
<p>A QOI file has a 14 byte <a class="reference external" href="#Header">header</a>, followed by any number of data &quot;chunks&quot; and an 8-byte <a class="reference external" href="#QOI_END">end</a> marker. Images are encoded row by row, left to right, top to bottom. The decoder and encoder start with <tt class="docutils literal"><span class="pre">{r:0, g:0, b:0, a:255}</span></tt> as the previous pixel value. An image is complete when all pixels specified by <tt class="docutils literal"><span class="pre">width * height</span></tt> have been covered.</p>
<dl class="docutils"><dt>Pixels are encoded as:</dt>
<dd><ul class="simple"><li>a run of the previous pixel</li>
<li>an index into an array of previously seen pixels</li>
<li>a difference to the previous pixel value in r,g,b</li>
<li>full r,g,b or r,g,b,a values</li>
</ul>
</dd>
</dl>
<p>The color channels are assumed to not be premultiplied with the alpha channel (&quot;un-premultiplied alpha&quot;).</p>
<p>A running <tt class="docutils literal"><span class="pre">array[64]</span></tt> (zero-initialized) of previously seen pixel values is maintained by the encoder and decoder. Each pixel that is seen by the encoder and decoder is put into this array at the position formed by a hash function of the color value. In the encoder, if the pixel value at the index matches the current pixel, this index position is written to the stream as QOI_OP_INDEX. The hash function for the index is:</p>
<pre class="listing"><span class="Identifier">index_position</span> <span class="Operator">=</span> <span class="Punctuation">(</span><span class="Identifier">r</span> <span class="Operator">*</span> <span class="DecNumber">3</span> <span class="Operator">+</span> <span class="Identifier">g</span> <span class="Operator">*</span> <span class="DecNumber">5</span> <span class="Operator">+</span> <span class="Identifier">b</span> <span class="Operator">*</span> <span class="DecNumber">7</span> <span class="Operator">+</span> <span class="Identifier">a</span> <span class="Operator">*</span> <span class="DecNumber">11</span><span class="Punctuation">)</span> <span class="Operator">%</span> <span class="DecNumber">64</span></pre><p>Each chunk starts with a 2-bit or 8-bit tag, followed by a number of data bits. The bit length of chunks is divisible by 8 - i.e. all chunks are byte aligned. All values encoded in these data bits have the most significant bit on the left.</p>
<p>The 8-bit tags have precedence over the 2-bit tags. A decoder must check for the presence of an 8-bit tag first.</p>
<p>The byte stream's end is marked with 7 0x00 bytes followed a single 0x01 byte.</p>
<p>The possible chunks are:</p>
<dl class="docutils"><dt><tt class="docutils literal"><span class="pre">QOI_OP_INDEX</span></tt>:</dt>
<dd><ul class="simple"><li><tt class="docutils literal"><span class="pre">Byte[0]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[6..7]</span></tt>  2-bit tag b00</li>
<li><tt class="docutils literal"><span class="pre">bits[0..5]</span></tt>  6-bit index into the color index array: 0..63</li>
</ul>
</li>
<li>A valid encoder must not issue 2 or more consecutive QOI_OP_INDEX chunks to the same index. QOI_OP_RUN should be used instead.</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">QOI_OP_DIFF</span></tt>:</dt>
<dd><ul class="simple"><li><tt class="docutils literal"><span class="pre">Byte[0]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[6..7]</span></tt>  2-bit tag b01</li>
<li><tt class="docutils literal"><span class="pre">bits[4..5]</span></tt>  red channel difference from the previous pixel between -2..1</li>
<li><tt class="docutils literal"><span class="pre">bits[2..3]</span></tt>  green channel difference from the previous pixel between -2..1</li>
<li><tt class="docutils literal"><span class="pre">bits[0..1]</span></tt>  blue channel difference from the previous pixel between -2..1</li>
</ul>
</li>
</ul>
<ul class="simple"><li>The difference to the current channel values are using a wraparound operation, so &quot;1 - 2&quot; will result in 255, while &quot;255 + 1&quot; will result in 0.</li>
<li>Values are stored as unsigned integers with a bias of 2. E.g. -2 is stored as 0 (b00). 1 is stored as 3 (b11).</li>
<li>The alpha value remains unchanged from the previous pixel.</li>
</ul>
</dd>
</dl>
<dl class="docutils"><dt><tt class="docutils literal"><span class="pre">QOI_OP_LUMA</span></tt>:</dt>
<dd><ul class="simple"><li><tt class="docutils literal"><span class="pre">Byte[0]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[6..7]</span></tt>  2-bit tag b10</li>
<li><tt class="docutils literal"><span class="pre">bits[0..5]</span></tt>  6-bit green channel difference from the previous pixel -32..31</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">Byte[1]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[4..7]</span></tt>  4-bit red channel difference minus green channel difference -8..7</li>
<li><tt class="docutils literal"><span class="pre">bits[0..3]</span></tt>  4-bit blue channel difference minus green channel difference -8..7</li>
</ul>
</li>
<li>The green channel is used to indicate the general direction of change and is encoded in 6 bits. The red and blue channels (dr and db) base their diffs off of the green channel difference and are encoded in 4 bits. I.e.:<ul class="simple"><li><tt class="docutils literal"><span class="pre">dr_dg = (cur_px.r - prev_px.r) - (cur_px.g - prev_px.g)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">db_dg = (cur_px.b - prev_px.b) - (cur_px.g - prev_px.g)</span></tt></li>
</ul>
</li>
<li>The difference to the current channel values are using a wraparound operation, so &quot;10 - 13&quot; will result in 253, while &quot;250 + 7&quot; will result in 1.</li>
<li>Values are stored as unsigned integers with a bias of 32 for the green channel and a bias of 8 for the red and blue channel.</li>
<li>The alpha value remains unchanged from the previous pixel.</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">QOI_OP_RUN</span></tt>:</dt>
<dd><ul class="simple"><li><tt class="docutils literal"><span class="pre">Byte[0]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[6..7]</span></tt>  2-bit tag b11</li>
<li><tt class="docutils literal"><span class="pre">bits[0..5]</span></tt>  6-bit run-length repeating the previous pixel: 1..62</li>
</ul>
</li>
<li>The run-length is stored with a bias of -1. Note that the run-lengths 63 and 64 (b111110 and b111111) are illegal as they are occupied by the QOI_OP_RGB and QOI_OP_RGBA tags.</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">QOI_OP_RGB</span></tt>:</dt>
<dd><ul class="simple"><li><tt class="docutils literal"><span class="pre">Byte[0]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[0..7]</span></tt>  8-bit tag b11111110</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">Byte[1]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[0..7]</span></tt>  8-bit red channel value</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">Byte[2]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[0..7]</span></tt>  8-bit green channel value</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">Byte[3]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[0..7]</span></tt>  8-bit blue channel value</li>
</ul>
</li>
<li>The alpha value remains unchanged from the previous pixel.</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">QOI_OP_RGBA</span></tt>:</dt>
<dd><ul class="simple"><li><tt class="docutils literal"><span class="pre">Byte[0]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[0..7]</span></tt>  8-bit tag b11111110</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">Byte[1]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[0..7]</span></tt>  8-bit red channel value</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">Byte[2]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[0..7]</span></tt>  8-bit green channel value</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">Byte[3]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[0..7]</span></tt>  8-bit blue channel value</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">Byte[4]</span></tt><ul class="simple"><li><tt class="docutils literal"><span class="pre">bits[0..7]</span></tt>  8-bit alpha channel value</li>
</ul>
</li>
</ul>
</dd>
</dl>
</p>
  <div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<div id="Channels">
<dt><pre><a href="qoi.html#Channels"><span class="Identifier">Channels</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">RGB</span> <span class="Other">=</span> <span class="DecNumber">3</span><span class="Other">,</span> <span class="Identifier">RGBA</span> <span class="Other">=</span> <span class="DecNumber">4</span></pre></dt>
<dd>

<dl class="docutils"><dt>The channel byte in the QOI file header is an enum where:</dt>
<dd><ul class="simple"><li>3 = RGB</li>
<li>4 = RGBA</li>
</ul>
</dd>
</dl>


</dd>
</div>
<div id="Colorspace">
<dt><pre><a href="qoi.html#Colorspace"><span class="Identifier">Colorspace</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">sRGB</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">,</span> <span class="Identifier">linear</span> <span class="Other">=</span> <span class="DecNumber">1</span></pre></dt>
<dd>

<dl class="docutils"><dt>The colorspace byte in the QOI file header is an enum where:</dt>
<dd><ul class="simple"><li>0 = sRGB, i.e. gamma scaled RGB channels and a linear alpha channel</li>
<li>1 = all channels are linear</li>
</ul>
</dd>
</dl>
<p>The colorspace is purely informative. It will be saved to the file header, but does not affect how chunks are encoded/decoded.</p>


</dd>
</div>
<div id="Header">
<dt><pre><a href="qoi.html#Header"><span class="Identifier">Header</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">width</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint32</span>
  <span class="Identifier">height</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">uint32</span>
  <span class="Identifier">channels</span><span class="Operator">*</span><span class="Other">:</span> <a href="qoi.html#Channels"><span class="Identifier">Channels</span></a>
  <span class="Identifier">colorspace</span><span class="Operator">*</span><span class="Other">:</span> <a href="qoi.html#Colorspace"><span class="Identifier">Colorspace</span></a>
</pre></dt>
<dd>

<dl class="docutils"><dt>A QOI file has a 14 byte header, whose fields are defined as follows:</dt>
<dd><ul class="simple"><li>magic       [char, 4] - magic bytes &quot;qoif&quot; (not stored in the data object but checked when decoding a data stream)</li>
<li>width       [uint32]  - image width in pixels (BE)</li>
<li>height      [uint32]  - image height in pixels (BE)</li>
<li>channels    [byte]    - 3 = RGB, 4 = RGBA</li>
<li>colorspace  [byte]    - 0 = sRGB with linear alpha, 1 = all channels linear</li>
</ul>
</dd>
</dl>


</dd>
</div>
<div id="QOIF">
<dt><pre><a href="qoi.html#QOIF"><span class="Identifier">QOIF</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">header</span><span class="Operator">*</span><span class="Other">:</span> <a href="qoi.html#Header"><span class="Identifier">Header</span></a>
  <span class="Identifier">data</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">byte</span><span class="Other">]</span>
</pre></dt>
<dd>

The object that stores QOI image data for use in programs.

</dd>
</div>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<div id="decodeQOI,MemStream">
<dt><pre><span class="Keyword">proc</span> <a href="#decodeQOI%2CMemStream"><span class="Identifier">decodeQOI</span></a><span class="Other">(</span><span class="Identifier">stream</span><span class="Other">:</span> <span class="Identifier">MemStream</span><span class="Other">)</span><span class="Other">:</span> <a href="qoi.html#QOIF"><span class="Identifier">QOIF</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Decode the raw bytes of a QOI image from memory</p>
<p>The decode procedure returns a Result object, which can either return a QOI image if no errors occured, otherwise a error enum is returned.  </p>


</dd>
</div>
<div id="encodeQOI,Header,MemStream">
<dt><pre><span class="Keyword">proc</span> <a href="#encodeQOI%2CHeader%2CMemStream"><span class="Identifier">encodeQOI</span></a><span class="Other">(</span><span class="Identifier">header</span><span class="Other">:</span> <a href="qoi.html#Header"><span class="Identifier">Header</span></a><span class="Other">;</span> <span class="Identifier">stream</span><span class="Other">:</span> <span class="Identifier">MemStream</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">MemStream</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<dl class="docutils"><dt>Purpose:</dt>
<dd>Encode raw RGB or RGBA pixels into a QOI image in memory</dd>
<dt>Inputs:</dt>
<dd>header: Header - The image description object (width, length, channels, colorspace) stream: MemStream - The input data stream of raw RGB/RGBA values</dd>
<dt>Side-Effects:</dt>
<dd>Changes the read position of the 'stream' MemStream</dd>
<dt>Returns:</dt>
<dd>A MemStream object that stores the QOI image with the header data and associated compressed image data</dd>
</dl>


</dd>
</div>
<div id="readQOI,string">
<dt><pre><span class="Keyword">proc</span> <a href="#readQOI%2Cstring"><span class="Identifier">readQOI</span></a><span class="Other">(</span><span class="Identifier">file</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <a href="qoi.html#QOIF"><span class="Identifier">QOIF</span></a> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
                                   <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ReadIOEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

<p>Read and decode a QOI image from the file system.</p>
<p>If channels is 0, the number of channels from the file header is used. If channels is 3 or 4 the output format will be forced into this number of channels. </p>


</dd>
</div>
<div id="writeQOI,string,Header,MemStream">
<dt><pre><span class="Keyword">proc</span> <a href="#writeQOI%2Cstring%2CHeader%2CMemStream"><span class="Identifier">writeQOI</span></a><span class="Other">(</span><span class="Identifier">file</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">header</span><span class="Other">:</span> <a href="qoi.html#Header"><span class="Identifier">Header</span></a><span class="Other">;</span> <span class="Identifier">stream</span><span class="Other">:</span> <span class="Identifier">MemStream</span><span class="Other">)</span> {.
    <span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">IOError</span><span class="Other">,</span> <span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">WriteIOEffect</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Desciption

</dd>
</div>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2022-09-17 17:48:06 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
